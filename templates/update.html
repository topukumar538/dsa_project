
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Change Password ‚Äî Vibe</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;700&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}

:root{
  --green:#1db954;
  --green-light:#1ed760;
  --black:#000000;
  --card:#181818;
  --text:#ffffff;
  --muted:#b3b3b3;
  --border:rgba(255,255,255,0.1);
  --input-bg:#2a2a2a;
  --error:#f15e6c;
  --error-bg:rgba(241,94,108,0.1);
}

html,body{min-height:100vh;background:var(--black);color:var(--text);font-family:'DM Sans',sans-serif;}

/* ‚îÄ‚îÄ background ‚îÄ‚îÄ */
.bg{
  position:fixed;inset:0;z-index:0;
  background:
    radial-gradient(ellipse 80% 50% at 50% -10%, rgba(29,185,84,0.18) 0%, transparent 60%),
    linear-gradient(180deg,#0d0d0d 0%,#000 70%);
}

/* ‚îÄ‚îÄ nav ‚îÄ‚îÄ */
nav{
  position:fixed;top:0;left:0;right:0;z-index:10;
  padding:1.4rem 2.5rem;
  display:flex;align-items:center;justify-content:space-between;
}
.nav-logo{display:flex;align-items:center;gap:9px;text-decoration:none;}
.logo-icon{
  width:32px;height:32px;background:var(--green);border-radius:50%;
  display:grid;place-items:center;
}
.logo-icon svg{width:18px;height:18px;fill:#000;}
.logo-name{font-weight:700;font-size:1.3rem;color:#fff;letter-spacing:-0.02em;}
.nav-right a{
  color:#fff;font-weight:700;text-decoration:none;
  padding:0.6rem 1.8rem;border-radius:500px;
  border:1.5px solid rgba(255,255,255,0.5);
  font-size:0.88rem;
  transition:border-color 0.2s,background 0.2s;
}
.nav-right a:hover{border-color:#fff;background:rgba(255,255,255,0.05);}

/* ‚îÄ‚îÄ page ‚îÄ‚îÄ */
.page{
  position:relative;z-index:1;
  min-height:100vh;
  display:flex;align-items:center;justify-content:center;
  padding:7rem 1.5rem 3rem;
}

/* ‚îÄ‚îÄ card ‚îÄ‚îÄ */
.card{
  width:100%;max-width:440px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:2.8rem 2.5rem;
  animation:slideUp 0.5s ease forwards;
}
@keyframes slideUp{from{opacity:0;transform:translateY(24px);}to{opacity:1;transform:translateY(0);}}

/* ‚îÄ‚îÄ card header ‚îÄ‚îÄ */
.card-logo{display:flex;justify-content:center;margin-bottom:2rem;}
.card-logo-icon{
  width:50px;height:50px;background:var(--green);border-radius:50%;
  display:grid;place-items:center;
  box-shadow:0 0 30px rgba(29,185,84,0.35);
  font-size:1.4rem;
}
.card-title{
  font-weight:700;font-size:1.75rem;
  letter-spacing:-0.02em;text-align:center;
  margin-bottom:0.4rem;
}
.card-subtitle{
  text-align:center;font-size:0.88rem;
  color:var(--muted);margin-bottom:2rem;
}

/* ‚îÄ‚îÄ alert ‚îÄ‚îÄ */
.alert{
  display:flex;align-items:flex-start;gap:10px;
  padding:0.85rem 1rem;border-radius:8px;
  font-size:0.875rem;font-weight:500;
  margin-bottom:1.5rem;line-height:1.5;
  background:var(--error-bg);color:var(--error);
  border:1px solid rgba(241,94,108,0.25);
}
.alert-icon{font-size:1rem;flex-shrink:0;margin-top:1px;}

/* ‚îÄ‚îÄ form ‚îÄ‚îÄ */
.form-group{margin-bottom:1.1rem;}
label{
  display:block;font-size:0.78rem;font-weight:700;
  letter-spacing:0.05em;text-transform:uppercase;
  color:var(--muted);margin-bottom:0.45rem;
}
input[type="text"],
input[type="email"],
input[type="password"]{
  width:100%;padding:0.82rem 1rem;
  background:var(--input-bg);
  border:1.5px solid rgba(255,255,255,0.12);
  border-radius:6px;
  color:#fff;font-family:'DM Sans',sans-serif;font-size:0.93rem;
  transition:border-color 0.2s,background 0.2s;
  outline:none;
}
input::placeholder{color:rgba(255,255,255,0.22);}
input:focus{border-color:var(--green);background:#333;}
input.error-field{border-color:var(--error);}

/* ‚îÄ‚îÄ divider ‚îÄ‚îÄ */
.divider{
  display:flex;align-items:center;gap:1rem;
  margin:1.5rem 0 1.25rem;
}
.div-line{flex:1;height:1px;background:var(--border);}
.div-text{
  font-size:0.72rem;font-weight:700;
  letter-spacing:0.08em;text-transform:uppercase;
  color:rgba(255,255,255,0.2);white-space:nowrap;
}

/* ‚îÄ‚îÄ strength bar ‚îÄ‚îÄ */
.strength-wrap{margin-top:0.5rem;}
.strength-bar{
  height:3px;border-radius:999px;
  background:rgba(255,255,255,0.08);
  overflow:hidden;
}
.strength-fill{
  height:100%;width:0%;border-radius:999px;
  transition:width 0.3s,background 0.3s;
}
.strength-label{
  font-size:0.72rem;color:var(--muted);margin-top:4px;
}

/* ‚îÄ‚îÄ submit ‚îÄ‚îÄ */
.btn-submit{
  width:100%;padding:0.9rem;
  background:var(--green);color:#000;
  border:none;border-radius:500px;
  font-family:'DM Sans',sans-serif;font-size:0.95rem;font-weight:700;
  cursor:pointer;margin-top:0.5rem;
  transition:background 0.15s,transform 0.15s,box-shadow 0.2s;
}
.btn-submit:hover{
  background:var(--green-light);
  transform:scale(1.02);
  box-shadow:0 6px 24px rgba(29,185,84,0.4);
}
.btn-submit:active{transform:scale(0.99);}

/* ‚îÄ‚îÄ bottom link ‚îÄ‚îÄ */
.bottom-link{
  text-align:center;margin-top:1.5rem;
  font-size:0.875rem;color:var(--muted);
}
.bottom-link a{
  color:#fff;font-weight:700;text-decoration:none;
  border-bottom:1px solid transparent;
  transition:color 0.2s,border-color 0.2s;
}
.bottom-link a:hover{color:var(--green);border-color:var(--green);}

@media(max-width:480px){
  nav{padding:1rem 1.25rem;}
  .card{padding:2rem 1.25rem;}
}
</style>
</head>
<body>

<div class="bg"></div>

<!-- nav -->
<nav>
  <a href="/" class="nav-logo">
    <div class="logo-icon">
      <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.65 14.65c-.2.2-.51.27-.78.15-2.14-1.31-4.83-1.6-8-.88-.31.07-.62-.12-.69-.43-.07-.31.12-.62.43-.69 3.47-.8 6.45-.45 8.84 1.02.27.16.34.51.2.83zm1.24-2.77c-.25.25-.64.33-.97.19-2.45-1.5-6.18-1.94-9.08-1.06-.37.11-.76-.1-.87-.47s.1-.76.47-.87c3.31-.99 7.42-.51 10.23 1.24.32.2.42.62.22.97zm.11-2.88C15.12 9.46 10.42 9.3 7.75 10.09c-.44.13-.91-.12-1.04-.56-.13-.44.12-.91.56-1.04 3.07-.93 8.17-.75 11.39 1.23.4.24.52.75.28 1.15-.24.4-.76.53-1.14.29z"/></svg>
    </div>
    <span class="logo-name">Vibe</span>
  </a>
  <div class="nav-right">
    <a href="/login">‚Üê Back to Login</a>
  </div>
</nav>

<!-- page -->
<div class="page">
  <div class="card">

    <!-- icon -->
    <div class="card-logo">
      <div class="card-logo-icon">üîë</div>
    </div>

    <h1 class="card-title">Change Password</h1>
    <p class="card-subtitle">Update your credentials to keep your account secure.</p>

    <!-- error -->
    {% if error %}
    <div class="alert">
      <span class="alert-icon">‚ö†</span>
      <span>{{ error }}</span>
    </div>
    {% endif %}

    <!-- form -->
    <form method="POST" action="/update" novalidate>

      <div class="form-group">
        <label for="email">Email Address</label>
        <input
          type="text" id="email" name="email"
          placeholder="you@example.com"
          value="{{ email or '' }}"
          autocomplete="email" required
          class="{{ 'error-field' if error else '' }}"
        />
      </div>

      <!-- divider -->
      <div class="divider">
        <div class="div-line"></div>
        <span class="div-text">Password Update</span>
        <div class="div-line"></div>
      </div>

      <div class="form-group">
        <label for="old_password">Current Password</label>
        <input
          type="password" id="old_password" name="old_password"
          placeholder="Your current password"
          autocomplete="current-password" required
          class="{{ 'error-field' if error else '' }}"
        />
      </div>

      <div class="form-group">
        <label for="new_password">New Password</label>
        <input
          type="password" id="new_password" name="new_password"
          placeholder="Create a new password"
          autocomplete="new-password" required
          class="{{ 'error-field' if error else '' }}"
          oninput="checkStrength(this.value)"
        />
        <div class="strength-wrap">
          <div class="strength-bar"><div class="strength-fill" id="strengthFill"></div></div>
          <p class="strength-label" id="strengthLabel"></p>
        </div>
      </div>

      <div class="form-group">
        <label for="confirm_password">Confirm New Password</label>
        <input
          type="password" id="confirm_password" name="confirm_password"
          placeholder="Repeat new password"
          autocomplete="new-password" required
          class="{{ 'error-field' if error else '' }}"
        />
      </div>

      <button type="submit" class="btn-submit">Update Password</button>
    </form>

    <div class="bottom-link">
      Remembered it? <a href="/login">Back to login</a>
    </div>

  </div>
</div>

<script>
function checkStrength(val) {
  const fill = document.getElementById('strengthFill');
  const label = document.getElementById('strengthLabel');
  if (!val) { fill.style.width='0%'; label.textContent=''; return; }

  let score = 0;
  if (val.length >= 6)  score++;
  if (val.length >= 10) score++;
  if (/[A-Z]/.test(val)) score++;
  if (/[0-9]/.test(val)) score++;
  if (/[^A-Za-z0-9]/.test(val)) score++;

  const levels = [
    { w:'20%', color:'#f15e6c', text:'Too weak'  },
    { w:'40%', color:'#ff9800', text:'Weak'      },
    { w:'60%', color:'#ffd700', text:'Fair'      },
    { w:'80%', color:'#1db954', text:'Strong'    },
    { w:'100%',color:'#1ed760', text:'Very strong'},
  ];
  const l = levels[Math.min(score - 1, 4)];
  fill.style.width    = l.w;
  fill.style.background = l.color;
  label.textContent   = l.text;
  label.style.color   = l.color;
}
</script>

</body>
</html>
